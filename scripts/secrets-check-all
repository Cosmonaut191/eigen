#!/usr/bin/env yarn zx


// This script runs to make sure all repo files don't contain secrets.


import {startSpinner} from 'zx/experimental'


const files = (await $`git ls-files`).stdout
const filesList = files.split("\n")
filesList.pop() // remove last empty line

const stop = startSpinner()
await $`detect-secrets-hook --baseline .secrets.baseline --verbose ${filesList}`
stop()
